<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="referrer" content="never" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="ip,yiove" />
    <meta
      name="description"
      content="实时获取当前设备网络 IP 地址，支持多线路，包括中国移动、中国联通、中国电信、海外线路，以及访问谷歌等特殊网站。"
    />
    <title>IP 工具箱</title>
  </head>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            background-color: #f4f4f4;
        }
        input, button {
            padding: 10px;
            font-size: 16px;
        }
        button {
            cursor: pointer;
        }
    </style>
</head>

    <script>
        function fetchIPInfo() {
            var ip = $('#ipInput').val();
            var url = "https://qifu-api.baidubce.com/ip/geo/v1/district?ip=" + ip;
            
            // 这里需要实现API请求，注意CORS策略问题
            $.ajax({
                url: url,
                method: 'GET',
                dataType: 'json',
                headers: {
                    'Accept': 'application/json',
                    'User-Agent': 'YourBot/1.0', // 根据实际情况可能需要调整
                },
                success: function(data) {
                    if (data.code === "Success") {
                        displayResult(data);
                    } else {
                        $('#result').html('查询失败: ' + data.msg);
                    }
                },
                error: function(xhr, status, error) {
                    $('#result').html('查询失败，无法连接到服务器。');
                }
            });
        }

        function displayResult(data) {
            var info = data.data;
            var content = "<strong>大陆:</strong> " + info.continent +
                "<br><strong>国家:</strong> " + info.country +
                "<br><strong>邮编:</strong> " + info.zipcode +
                "<br><strong>时区:</strong> " + info.timezone +
                "<br><strong>精度:</strong> " + info.accuracy +
                "<br><strong>所有者:</strong> " + info.owner +
                "<br><strong>ISP:</strong> " + info.isp +
                "<br><strong>来源:</strong> " + info.source +
                "<br><strong>地区码:</strong> " + info.areacode +
                "<br><strong>行政码:</strong> " + info.adcode +
                "<br><strong>ASN号:</strong> " + info.asnumber +
                "<br><strong>纬度:</strong> " + info.lat +
                "<br><strong>经度:</strong> " + info.lng +
                "<br><strong>半径:</strong> " + info.radius +
                "<br><strong>省份:</strong> " + info.prov +
                "<br><strong>城市:</strong> " + info.city +
                "<br><strong>区县:</strong> " + info.district;
            $('#result').html(content);
        }
    </script>



  <style type="text/css">
    [id$="ipv6"],
    #myip-la {
      word-break: normal;
      width: auto;
      display: block;
      white-space: pre-wrap;
      word-wrap: break-word;
      overflow: hidden;
    }
  </style>

  <body>
    <style>
      body {
        background: #ecf0f3;
        margin: 0;
        padding: 0;
      }

      .header {
        background-color: #fff;
        font-size: larger;
        font-weight: 600;
        padding: 10px 20px;
      }

      .title {
        margin: 20px;
        padding: 10px;
        font-size: larger;
        font-weight: 600;
        line-height: 1em;
      }

      .container {
        display: grid;
        grid-gap: 5px;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        padding: 10px 20px;
      }

      .box {
        margin: 10px;
        padding: 20px;
        line-height: 2.5em;
        border-radius: 5px;
        box-shadow: 18px 18px 30px #d1d9e6, -18px -18px 30px #fff;
      }

      .box-title {
        font-size: larger;
        font-weight: 600;
        line-height: 1em;
        margin-bottom: 20px;
        padding-left: 10px;
        border-left-style: solid;
      }

      .box-title img {
        margin-left: 10px;
        width: 1em;
      }

      .box-info {
        color: #242424;
      }

      .search-box {
        padding: 10px 30px;
      }

      .search-box input {
        line-height: inherit;
        border: 1px solid #cdcdcd;
        border-radius: 5px;
        height: 30px;
        width: 50%;
        min-width: 100px;
        padding: 2px 10px;
      }

      .search-box button {
        margin-left: 5px;
        padding: 2px 20px;
        line-height: 2.5em;
        border: 0;
        border-radius: 5px;
        box-shadow: 18px 18px 30px #d1d9e6, -18px -18px 30px #fff;
      }

      .search-box button:hover {
        box-shadow: inset 18px 18px 30px #d1d9e6, inset -18px -18px 30px #fff;
      }
    </style>
    <div class="header">IP 工具箱</div>
    <div class="title">🕵️ IP 查询</div>
  <div class="search-box">
  <input type="text" id="ipInput" placeholder="请输入IP地址">
    <button onclick="fetchIPInfo()">查询</button>
    </div>
    <div id="result" class="box-info">查询结果会显示在这里。</div>


    <div class="title">
      🕵️ IP 信息 (您的网络是 <span id="youxian"></span>优先)
    </div>
    <div class="container">
      <div class="box">
        <div class="box-title">功能介绍</div>
        <div class="box-info">
          1、支持多线路查看你的 IP
          地址，隐藏功能就是看你的网络是否支持访问谷歌等网站。 <br />2、支持获取
          IPv4 和 IPv6 。
        </div>
      </div>
      <!--
              这是多行注释
              这是多行注释
              这是多行注释
          
    <div class="box">
        <div class="box-title">中国移动</div>
        <div class="box-info" id="cncm">
          <div>来源：itdog.cn</div>
          <div>IPv4：
            <span id="cm-ipv4">测试中...</span></div>
          <div>IPv6：
            <span id="cm-ipv6">测试中...</span></div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">中国联通</div>
        <div class="box-info" id="cncu">
          <div>来源：itdog.cn</div>
          <div>IPv4：
            <span id="cu-ipv4">测试中...</span></div>
          <div>IPv6：
            <span id="cu-ipv6">测试中...</span></div>
        </div>
      </div>
      
      <div class="box">
        <div class="box-title">中国电信</div>
        <div class="box-info" id="cnct">
          <div>来源：itdog.cn</div>
          <div>IPv4：
            <span id="ct-ipv4">测试中...</span></div>
          <div>IPv6：
            <span id="ct-ipv6">测试中...</span></div>
        </div>
      </div>
    -->

      <div class="box">
        <div class="box-title">国内环境多API</div>
        <div class="box-info" id="ip-other">
          <div>
            ip-api.io：
            <span id="ip-api">测试中...</span>
          </div>
          <div>
            MyIP.la：
            <span id="myip-la">测试中...</span>
          </div>
          <div>
            ipip.net：
            <span id="ipip-net">测试中...</span>
          </div>
        </div>
      </div>

      <div class="box">
        <div class="box-title">海外、港澳台</div>
        <div class="box-info" id="cnhk">
          <div>来源：itdog.cn</div>
          <div>
            IPv4：
            <span id="hk-ipv4">测试中...</span>
          </div>
          <div>
            IPv6：
            <span id="hk-ipv6">测试中...</span>
          </div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">国外线路</div>
        <div class="box-info" id="ipsb">
          <div>
            ISP：
            <span id="ipsb-isp">测试中...</span>
          </div>
          <div>
            IPv4：
            <span id="ipsb-ipv4">测试中...</span>
          </div>
          <div>
            IPv6：
            <span id="ipsb-ipv6">测试中...</span>
          </div>
        </div>
      </div>

      <div class="box">
        <div class="box-title">国内环境</div>
        <div class="box-info" id="cnct">
          <div>来源：itdog.cn</div>
          <div>
            IPv4：
            <span id="ct-ipv4">测试中...</span>
          </div>
          <div>
            IPv6：
            <span id="ct-ipv6">测试中...</span>
          </div>
        </div>
      </div>
    </div>
    <div class="title">🕵️ 网络联通性</div>
    <div class="container">
      <div class="box">
        <div class="box-title">功能介绍</div>
        <div class="box-info">
          通过加载对应网站上的小图片进行测试，延迟值仅供参考，实际会更小。
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          Google
          <span id="google-ico"></span>
        </div>
        <div class="box-info" id="google">
          <div>
            状态：
            <span id="google-flag">测试中...</span>
          </div>
          <div>延迟： <span id="google-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          YouTube
          <span id="youtube-ico"></span>
        </div>
        <div class="box-info" id="youtube">
          <div>
            状态：
            <span id="youtube-flag">测试中...</span>
          </div>
          <div>延迟： <span id="youtube-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          Github
          <span id="github-ico"></span>
        </div>
        <div class="box-info" id="github">
          <div>
            状态：
            <span id="github-flag">测试中...</span>
          </div>
          <div>延迟： <span id="github-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          CloudFlare
          <span id="cloudflare-ico"></span>
        </div>
        <div class="box-info" id="cloudflare">
          <div>
            状态：
            <span id="cloudflare-flag">测试中...</span>
          </div>
          <div>延迟： <span id="cloudflare-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          OpenAI
          <span id="openai-ico"></span>
        </div>
        <div class="box-info" id="openai">
          <div>
            状态：
            <span id="openai-flag">测试中...</span>
          </div>
          <div>延迟： <span id="openai-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          X (Twitter)
          <span id="x-ico"></span>
        </div>
        <div class="box-info" id="x">
          <div>
            状态：
            <span id="x-flag">测试中...</span>
          </div>
          <div>延迟： <span id="x-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          微信
          <span id="wechat-ico"></span>
        </div>
        <div class="box-info" id="wechat">
          <div>
            状态：
            <span id="wechat-flag">测试中...</span>
          </div>
          <div>延迟： <span id="wechat-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          百度
          <span id="baidu-ico"></span>
        </div>
        <div class="box-info" id="baidu">
          <div>
            状态：
            <span id="baidu-flag">测试中...</span>
          </div>
          <div>延迟： <span id="baidu-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          腾讯视频
          <span id="vqq-ico"></span>
        </div>
        <div class="box-info" id="vqq">
          <div>
            状态：
            <span id="vqq-flag">测试中...</span>
          </div>
          <div>延迟： <span id="vqq-ms">0</span>ms</div>
        </div>
      </div>
      <div class="box">
        <div class="box-title">
          爱奇艺
          <span id="iqiyi-ico"></span>
        </div>
        <div class="box-info" id="iqiyi">
          <div>
            状态：
            <span id="iqiyi-flag">测试中...</span>
          </div>
          <div>延迟： <span id="iqiyi-ms">0</span>ms</div>
        </div>
      </div>

      <div class="box">
        <div class="box-title">
          优酷
          <span id="youku-ico"></span>
        </div>
        <div class="box-info" id="youku">
          <div>
            状态：
            <span id="youku-flag">测试中...</span>
          </div>
          <div>延迟： <span id="youku-ms">0</span>ms</div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      function get_itdog(url, id) {
        return axios
          .get(url)
          .then(function (response) {
            document.getElementById(id).innerText =
              response.data.ip + "（" + response.data.address + "）";
            return response.data;
          })
          .catch(function (error) {
            console.log(error);
            document.getElementById(id).innerText = "数据获取出错";
            throw error;
          });
      }
      const requests = [
        { url: "https://ipv4_cm.itdog.cn/", id: "cm-ipv4" },
        { url: "https://ipv6_cm.itdog.cn/", id: "cm-ipv6" },
        { url: "https://ipv4_cu.itdog.cn/", id: "cu-ipv4" },
        { url: "https://ipv6_cu.itdog.cn/", id: "cu-ipv6" },
        { url: "https://ipv4_ct.itdog.cn/", id: "ct-ipv4" },
        { url: "https://ipv6_ct.itdog.cn/", id: "ct-ipv6" },
        { url: "https://ipv4-overseas.itdog.plus/", id: "hk-ipv4" },
        { url: "https://ipv6-overseas.itdog.plus/", id: "hk-ipv6" },
        { url: "https://ipv4.lvhai.org/", id: "haiwai-ipv4" },
        { url: "https://ipv6.lvhai.org/", id: "haiwai-ipv6" },
      ];
      Promise.all(requests.map(({ url, id }) => get_itdog(url, id)));
      function get_ip_other(url, id) {
        return axios
          .get(url)
          .then(function (response) {
            try {
              if (id.includes("ipsb")) {
                document.getElementById("ipsb-isp").innerText =
                  response.data.isp;
                document.getElementById(id).innerText =
                  response.data.ip +
                  "（" +
                  response.data.country +
                  " " +
                  response.data.region +
                  " " +
                  response.data.isp +
                  "）";
              } else if (id == "myip-la") {
                document.getElementById(id).innerText =
                  response.data.ip +
                  "（" +
                  response.data.location.country_name +
                  " " +
                  response.data.location.province +
                  " " +
                  response.data.location.city +
                  "）";
              } else if (id == "ipip-net") {
                document.getElementById(id).innerText =
                  response.data.data.ip +
                  "（" +
                  response.data.data.location +
                  "）";
              } else if (id == "ip-api") {
                document.getElementById(id).innerText =
                  response.data.ip +
                  "（" +
                  response.data.country_name +
                  " " +
                  response.data.city +
                  " " +
                  response.data.organisation +
                  "）";
              } else if (id == "search") {
                document.getElementById("search-organization").innerText =
                  response.data.isp;
                document.getElementById("search-country-code").innerText =
                  response.data.country_code;
                document.getElementById("search-country").innerText =
                  response.data.country;
                document.getElementById("search-region").innerText =
                  response.data.region;
                document.getElementById("search-city").innerText =
                  response.data.city;
                document.getElementById("search-timezone").innerText =
                  response.data.timezone;
                document.getElementById("search-tude").innerText =
                  response.data.longitude + "," + response.data.latitude;
              } else if (id == "youxian") {
                document.getElementById(id).innerText = response.data.version;
              }
            } catch (error) {
              console.error("Error processing response data:", error);
              document.getElementById(id).innerText = "数据格式错误";
            }
          })
          .catch(function (error) {
            console.error("Error fetching data from API:", error);
            document.getElementById(id).innerText = "数据获取出错";
          });
      }

      const requests_ipw = [
        { url: "https://api-ipv4.ip.sb/geoip/", id: "ipsb-ipv4" },
        { url: "https://api-ipv6.ip.sb/geoip/", id: "ipsb-ipv6" },
        { url: "https://api.myip.la/cn?json", id: "myip-la" },
        { url: "https://myip.ipip.net/json", id: "ipip-net" },
        { url: "https://ip-api.io/json", id: "ip-api" },
        { url: "https://test.itdog.cn/", id: "youxian" },
      ];
      Promise.all(requests_ipw.map(({ url, id }) => get_ip_other(url, id)));
      function get_img_test(url, id) {
        const startTime = performance.now();
        const img = new Image();
        img.onload = function () {
          const endTime = performance.now();
          const latency = endTime - startTime;
          document.getElementById(id + "-flag").innerText = "可用";
          document.getElementById(id + "-ms").innerText = Math.floor(latency);
          document.getElementById(id + "-ico").appendChild(img);
        };
        img.onerror = function (event) {
          console.log("img error:" + event);
          document.getElementById(id + "-flag").innerText = "数据获取出错";
        };
        const randomParam = Date.now();
        img.src = url + "?_=" + randomParam;
      }
      const requests_img = [
        {
          url: "https://res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico",
          id: "wechat",
        },
        {
          url: "https://github.githubassets.com/favicons/favicon.png",
          id: "github",
        },
        { url: "https://www.cloudflare.com/favicon.ico", id: "cloudflare" },
        { url: "https://www.baidu.com/favicon.ico", id: "baidu" },
        {
          url: "https://www.youtube.com/s/desktop/a669eefe/img/favicon.ico",
          id: "youtube",
        },
        { url: "https://www.google.com/favicon.ico", id: "google" },
        { url: "https://www.openai.com/favicon.ico", id: "openai" },
        { url: "https://www.x.com/favicon.ico", id: "x" },
        { url: "https://v.qq.com/favicon.ico", id: "vqq" },
        { url: "https://www.iqiyi.com/favicon.ico", id: "iqiyi" },
        { url: "https://www.youku.com/favicon.ico", id: "youku" },
        { url: "https://www.mgtv.com/favicon.ico", id: "mgtv" },
      ];
      Promise.all(requests_img.map(({ url, id }) => get_img_test(url, id)));
      function search() {
        var searchTerm = document.getElementById("searchInput").value;
        if (searchTerm == "") {
          alert("请先输入搜索 IP！");
          return false;
        }
        console.log("搜索词: " + searchTerm);
        document.getElementById("search").style.display = "block";
        get_ip_other("https://api.ip.sb/geoip/" + searchTerm, "search");
        return false;
      }
    </script>

    <script>
      function updateLatency(url, id) {
        const startTime = performance.now();
        const img = new Image();
        img.onload = function () {
          const endTime = performance.now();
          const latency = endTime - startTime;
          document.getElementById(id + "-flag").innerText = "可用";
          document.getElementById(id + "-ms").innerText = Math.floor(latency);
        };
        img.onerror = function (event) {
          console.log("img error:" + event);
          document.getElementById(id + "-flag").innerText = "数据获取出错";
        };
        const randomParam = Date.now();
        img.src = url + "?_=" + randomParam;
      }

      function startLatencyUpdates() {
        const interval = 1000; // 每秒更新一次
        const requests_img = [
          {
            url: "https://res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico",
            id: "wechat",
          },
          {
            url: "https://github.githubassets.com/favicons/favicon.png",
            id: "github",
          },
          { url: "https://www.cloudflare.com/favicon.ico", id: "cloudflare" },
          { url: "https://www.baidu.com/favicon.ico", id: "baidu" },
          {
            url: "https://www.youtube.com/s/desktop/a669eefe/img/favicon.ico",
            id: "youtube",
          },
          { url: "https://www.google.com/favicon.ico", id: "google" },
          { url: "https://www.openai.com/favicon.ico", id: "openai" },
          { url: "https://www.x.com/favicon.ico", id: "x" },
          { url: "https://v.qq.com/favicon.ico", id: "vqq" },
          { url: "https://www.iqiyi.com/favicon.ico", id: "iqiyi" },
          { url: "https://www.youku.com/favicon.ico", id: "youku" },
          { url: "https://www.mgtv.com/favicon.ico", id: "mgtv" },
        ];

        function updateAllLatencies() {
          requests_img.forEach(({ url, id }) => updateLatency(url, id));
        }

        setInterval(updateAllLatencies, interval);
      }

      document.addEventListener("DOMContentLoaded", startLatencyUpdates);
    </script>
  </body>
</html>
